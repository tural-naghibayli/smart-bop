<div class="bg-dark-blue flexbox">
    <%= image_tag "rig-image-form.jpg", alt: "About us", class: "main-form-pic"%>
    <h3 class= "test_heading">New Pressure Test</h3>
</div>

<div class=bg-light-blue>
  <div class="container">

    <%= simple_form_for [@bop, @pressure_test] do |f| %>
        <table >
          <tr>
            <td><%= f.input :well_name %></td>
            <h4>Last test date: <%= @bop.last_completed_pressure_test_date %></h4>
            <td><%= f.input :completed_date %></td>
          </tr>
          <tr>

            <td><%= f.input :test_fluid %></td>
            <td><%= f.input :drill_pipe_diameter %></td>
            <td><%= f.input :serial_number_chart_recorded %></td>
          </tr>

          <tr>
            <td><%= f.input :corrective_action %></td>
          </tr>
          <tr>
            <td><%= f.input :comment %></td>
          </tr>
        </table>

        <hr>

        <table class="form_table">
          <h3>Equipment Checks</h3>

            <% Question.all.each do |question| %>
              <tr>
                <% if question.category =="Equipment Checks" %>
                  <td class="form_question"><%= question.name %></td>
                  <td>
                    <%= f.simple_fields_for :answers do |answer| %>
                      <%= answer.input_field :value, as: :radio_buttons, collection: [['Yes', 'Yes'], ['No', 'No'], ["N/A","N/A"]], label: false %>
                      <%= answer.hidden_field :question_id, value: question.id %>
                    <% end %>
                  </td>
                <% end %>

                <% if question.category =="EquipmentCheckBypassNormal" %>
                  <td class="form_question"><%= question.name %></td>
                  <td>
                    <%= f.simple_fields_for :answers do |answer| %>
                      <%= answer.input :value, collection: [ "Bypass", "Normal"], label: false%>
                      <%= answer.hidden_field :question_id, value: question.id %>
                    <% end %>
                  </td>
                <% end %>

                <% if question.category =="ManifoldPressure" %>
                  <td class="form_question"><%= question.name %></td>
                  <td>
                    <%= f.simple_fields_for :answers do |answer| %>
                      <%= answer.input :value, as: :string, label: false %>
                      <%= answer.hidden_field :question_id, value: question.id %>
                    <% end %>
                  </td>
                <% end %>

              </tr>
            <% end %>

        </table>

        <hr>

        <h2>Components of BOP</h2>

          <div id='component_pressure_tests'>
              <%= f.simple_fields_for :component_pressure_tests do |component| %>
                <%= render 'component_pressure_tests_fields', f:component %>
              <% end %>
              <div class='links'>
                <%= link_to_add_association 'add Component', f, :component_pressure_tests %>
              </div>
          </div>



        <hr>
        <table class="form_table">
          <h3>Choke Manifold Checks</h3>

          <% Question.all.each do |question| %>
                <% if question.category =="General Manifold" %>
                  <td><%= question.name %></td>
                  <%= f.simple_fields_for :answers do |answer| %>
                    <td>
                      <%= answer.input_field :value,as: :radio_buttons, collection: [['Yes', 'Yes'], ['No', 'No'], ["N/A","N/A"]], label:false %>
                      <%= answer.hidden_field :question_id, value: question.id %>
                    </td>
                  <% end %>
                <% end %>
          <% end %>


              <% Question.all.each do |question| %>
                  <% if question.category =="Choke Manifold" %>
                    <td><%= question.name %></td>
                    <%= f.simple_fields_for :answers do |answer| %>
                      <td>
                        <%= answer.input_field :value, as: :radio_buttons, collection: [['Yes', 'Yes'], ['No', 'No'], ["N/A","N/A"]], label:false %>
                        <%= answer.hidden_field :question_id, value: question.id %>
                      </td>
                    <% end %>
                  <% end %>
              <% end %>

        </table>
    
        <hr>

        <table class="form_table">
            <h3> Standpipe Manifold Checks</h3>

              <% Question.all.each do |question| %>
                  <% if question.category =="General Manifold" %>
                    <td class="form_question"><%= question.name %></td>
                    <%= f.simple_fields_for :answers do |answer| %>
                      <td class="form_answer">
                        <%= answer.input_field :value,as: :radio_buttons, collection: [['Yes', 'Yes'], ['No', 'No'], ["N/A","N/A"]], label:false %>
                        <%= answer.hidden_field :question_id, value: question.id %>
                      </td>
                    <% end %>
                  <% end %>
                <% end %>
        </table>

        <hr>
        <h2>Safety Valve tests</h2>
        <div id='safety_valve_tests'>
          <%= f.simple_fields_for :safety_valve_tests do |safety_valve| %>
            <%= render 'safety_valve_tests_fields', f:safety_valve %>
          <% end %>
          <div class='links'>
            <%= link_to_add_association 'Add Safety_valve', f, :safety_valve_tests %>
          </div>
        </div>
        <hr>

    <h2>Approvals</h2>
    <div id='approvals'>
      <%= f.simple_fields_for :approvals do |approval| %>
        <%= render 'approval_fields', f:approval %>
      <% end %>
      <div class='links'>
        <%= link_to_add_association 'add approval', f, :approvals %>
      </div>
    </div>


    <%= f.submit %>
<% end %>
